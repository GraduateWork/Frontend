<ng-container *ngIf="{
  isLoading: isLoading$ | async,
  searchEvents: searchEvents$ | async,
  popularNowEvents: popularNowEvents$ | async,
  recommendedEvents: recommendedEvents$ | async,
  isSignIn: isSignIn$ | async
} as $">
  <app-header></app-header>
  <ion-content>
    <ion-item lines="none" class="search ion-margin">
      <ion-input
        type="text"
        placeholder="Поиск..."
        [(ngModel)]="searchInput"
        (keyup)="onSearchChange(searchInput)"
      ></ion-input>
      <ion-icon name="search-outline" slot="start"></ion-icon>
    </ion-item>
    <ng-container *ngIf="searchInput">
      <ng-container *ngIf="$.searchEvents.length !== 0">
        <app-small-event-list 
          [events]="$.searchEvents"
          [isSignIn]="$.isSignIn"
          (favoriteClick)="onFavoriteClick($event)"
        >
        </app-small-event-list>
      </ng-container>
      <ng-container *ngIf="$.searchEvents.length === 0 && !$.isLoading">
        <ion-text class="ion-text-center">
          <p>По вашему запросу ничего не найдено</p>
        </ion-text>
      </ng-container>
    </ng-container>
    <ng-container *ngIf="!searchInput">
      <app-badge-list 
        title="Популярное сейчас:" 
        [badgeList]="$.popularNowEvents">
      </app-badge-list>
      <ng-container *ngIf="$.isSignIn">
        <app-badge-list 
          title="Рекомендовано вам:" 
          [badgeList]="$.recommendedEvents">
        </app-badge-list>
      </ng-container>
    </ng-container>
  </ion-content>
</ng-container>
